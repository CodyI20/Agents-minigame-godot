[gd_scene load_steps=9 format=3 uid="uid://bjr26vmqp1sap"]

[ext_resource type="PackedScene" uid="uid://dun4c5mnmpc2a" path="res://Scenes/Agents/Spawner/nav_mesh_agent_spawner.tscn" id="1_oif8a"]
[ext_resource type="PackedScene" uid="uid://dd0p878x7ntbv" path="res://Scenes/Agents/UI/nav_mesh_agent_picker.tscn" id="2_oyxkh"]
[ext_resource type="PackedScene" uid="uid://bel866osrwrua" path="res://Scenes/controls.tscn" id="3_mjhsp"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_gintu"]

[sub_resource type="Sky" id="Sky_cb62f"]
sky_material = SubResource("ProceduralSkyMaterial_gintu")

[sub_resource type="Environment" id="Environment_6gm1o"]
background_mode = 2
sky = SubResource("Sky_cb62f")

[sub_resource type="NavigationMesh" id="NavigationMesh_x0ea8"]
vertices = PackedVector3Array(-2.1002, 6.78003, -24.9052, -1.8502, 6.78003, -14.4052, -1.3502, 6.78003, -24.6552, 6.8998, 6.78003, 24.3448, 6.6498, 6.78003, 14.0948, 6.1498, 6.78003, 24.3448, -24.6002, 6.78003, 24.0948, -24.6002, 6.78003, 24.5948, 24.6498, 6.78003, 24.5948, 24.6498, 6.78003, -24.9052, 24.1498, 6.78003, -24.9052, 24.1498, 6.78003, 24.3448, -0.350203, 0.180033, -12.1552, -1.1002, 0.180033, -13.4052, -2.8502, 0.180033, -13.6552, -11.8502, 0.180033, -3.1552, -7.8502, 0.180033, -3.1552, -1.3502, 0.180033, -10.4052, -2.8502, 0.180033, -23.6552, -23.3502, 0.180033, -23.6552, -23.3502, 0.180033, -1.6552, -12.1002, 0.180033, -1.4052, -0.600203, 0.180033, -13.6552, 7.3998, 0.180033, -20.4052, 9.6498, 0.180033, -22.1552, 9.6498, 0.180033, -23.6552, -0.600203, 0.180033, -23.6552, 7.3998, 0.180033, -19.9052, 10.1498, 0.180033, -22.1552, 6.6498, 0.180033, -10.9052, 8.8998, 0.180033, -9.6552, 11.3998, 0.180033, -11.1552, 13.3998, 0.180033, -18.1552, 13.3998, 0.180033, -18.9052, 23.3998, 0.180033, -23.6552, 15.1498, 0.180033, -9.9052, 16.1498, 0.180033, -7.1552, 23.3998, 0.180033, -7.1552, 13.1498, 0.180033, -10.9052, -0.600203, 0.480033, -10.1552, 2.1498, 0.480033, -7.9052, 11.8998, 3.78003, -18.1552, 9.6498, 3.78003, -20.9052, 4.3998, 0.180033, -14.9052, 6.3998, 0.180033, -12.9052, 11.6498, 0.180033, -18.4052, 9.3998, 0.180033, -20.4052, 3.8998, 0.180033, 16.0948, 5.3998, 0.180033, 16.0948, 5.3998, 0.180033, 13.3448, 2.6498, 0.180033, 12.5948, 8.6498, 0.180033, 3.0948, 10.8998, 0.180033, 2.8448, 11.1498, 0.180033, -3.1552, 7.8998, 0.180033, -7.6552, 7.1498, 0.180033, 13.0948, 7.8998, 0.180033, 9.5948, 6.3998, 0.180033, 7.0948, 0.649797, 0.180033, 11.3448, 7.8998, 0.180033, -6.4052, 3.1498, 0.180033, -7.6552, 2.8998, 0.180033, -6.9052, -7.3502, 0.180033, 1.8448, -4.8502, 0.180033, 11.8448, -2.1002, 0.180033, 10.5948, 8.8998, 0.180033, -4.1552, 7.1498, 0.180033, 4.0948, 2.3998, 0.180033, -6.9052, -7.3502, 0.180033, -2.6552, 11.3998, 11.73, -4.1552, 12.6498, 11.73, -4.1552, 14.1498, 11.73, -4.9052, 8.8998, 11.73, -7.1552, 9.6498, 11.73, -5.1552, 14.8998, 11.73, -6.6552, 14.1498, 11.73, -9.1552, 12.6498, 11.73, -9.9052, 10.1498, 11.73, -9.4052, 13.8998, 0.180033, -8.9052, 12.3998, 0.180033, -9.6552, 10.3998, 0.180033, -9.1552, 9.3998, 0.180033, -7.4052, 9.8998, 0.180033, -5.4052, 11.6498, 0.180033, -4.4052, 13.8998, 0.180033, -5.1552, 14.6498, 0.180033, -6.9052, 13.1498, 0.180033, 9.0948, 13.8998, 0.180033, 11.0948, 16.3998, 0.180033, 10.3448, 13.8998, 0.180033, 7.3448, 14.8998, 0.180033, -3.9052, 12.8998, 0.180033, 3.5948, 13.8998, 0.180033, 5.5948, 18.6498, 0.180033, 11.3448, 23.3998, 0.180033, 14.0948, 19.6498, 0.180033, 14.0948, 12.3998, 0.180033, -2.9052, -10.6002, 4.38003, 1.3448, -6.6002, 4.53003, 1.3448, -6.6002, 4.53003, -2.1552, -10.8502, 4.38003, -2.1552, -10.8502, 0.180033, -1.9052, -10.8502, 0.180033, 1.0948, -9.3502, 0.180033, 1.0948, -9.3502, 0.180033, -1.9052, -13.6002, 0.180033, 6.0948, -11.6002, 0.180033, 2.3448, -12.1002, 0.180033, 2.0948, -23.3502, 0.180033, 6.0948, -13.1002, 0.180033, 6.3448, -13.1002, 0.180033, 8.0948, -5.8502, 0.180033, 12.5948, -7.6002, 0.180033, 2.3448, -13.6002, 0.180033, 8.3448, 8.8998, 2.28003, 4.8448, 8.1498, 2.28003, 6.0948, 8.6498, 2.28003, 6.0948, 9.3998, 2.28003, 5.0948, 9.1498, 2.28003, 7.8448, 8.6498, 2.28003, 7.8448, 10.1498, 2.28003, 8.5948, 10.6498, 2.28003, 8.0948, 10.3998, 2.28003, 4.3448, 11.1498, 2.28003, 5.0948, 11.6498, 2.28003, 7.3448, 11.6498, 2.28003, 8.0948, 12.1498, 2.28003, 7.0948, 11.8998, 2.28003, 5.3448, 11.6498, 2.28003, 5.5948, -24.6002, 6.78003, 6.8448, -24.6002, 6.78003, 7.5948, -14.1002, 6.78003, 7.3448, -1.8502, 0.180033, 23.3448, -1.8502, 0.180033, 21.5948, -5.1002, 0.180033, 20.5948, -23.3502, 0.180033, 23.3448, -7.1002, 0.180033, 15.3448, -7.1002, 0.180033, 17.0948, -6.1002, 0.180033, 19.5948, -23.3502, 0.180033, 8.3448, 12.8998, 0.180033, 11.8448, 10.6498, 0.180033, 10.3448, 15.8998, 0.180033, 23.3448, 15.8998, 0.180033, 17.8448, 13.3998, 0.180033, 17.0948, 7.6498, 0.180033, 13.3448, 12.1498, 0.180033, 14.5948, 7.6498, 0.180033, 23.3448, 14.6498, 2.28003, 12.5948, 13.8998, 2.28003, 14.0948, 14.3998, 2.28003, 13.8448, 15.1498, 2.28003, 12.8448, 14.3998, 2.28003, 15.5948, 15.1498, 2.28003, 15.5948, 16.1498, 2.28003, 12.0948, 16.3998, 2.28003, 12.5948, 16.8998, 2.28003, 15.5948, 15.8998, 2.28003, 16.3448, 17.3998, 2.28003, 15.8448, 17.6498, 2.28003, 12.8448, 17.3998, 2.28003, 13.3448, 18.1498, 2.28003, 14.3448, 17.3998, 2.28003, 15.0948, -3.3502, 0.180033, 16.8448, -3.3502, 0.180033, 15.5948, -5.3502, 0.180033, 16.0948, -4.3502, 0.180033, 13.5948, -2.3502, 0.180033, 14.5948, -1.3502, 0.180033, 12.5948, 1.8998, 0.180033, 16.5948, 0.899797, 0.180033, 13.5948, -0.100203, 0.180033, 15.3448, -0.100203, 0.180033, 17.0948, 0.899797, 0.180033, 18.8448, -1.1002, 0.180033, 17.8448, -2.3502, 0.180033, 17.8448, -1.8502, 0.180033, 19.8448, -0.850203, 0.180033, 14.5948, -4.3502, 0.180033, 18.8448, -3.6002, 3.03003, 16.8448, -3.6002, 3.03003, 15.5948, -5.1002, 3.03003, 16.0948, -2.3502, 3.03003, 18.0948, -4.1002, 3.03003, 18.5948, -1.8502, 3.03003, 19.5948, -3.8502, 3.03003, 13.5948, -3.1002, 3.03003, 14.5948, 0.899797, 3.03003, 14.0948, -1.3502, 3.03003, 12.8448, -0.850203, 3.03003, 14.3448, 0.149797, 3.03003, 15.3448, -0.850203, 3.03003, 18.0948, 0.399797, 3.03003, 18.8448, 0.149797, 3.03003, 17.0948, 1.6498, 3.03003, 16.5948, 18.6498, 0.180033, 17.0948, 23.3998, 0.180033, 23.3448, 2.1498, 0.180033, 20.3448, 5.3998, 0.180033, 23.3448)
polygons = [PackedInt32Array(2, 1, 0), PackedInt32Array(5, 4, 3), PackedInt32Array(6, 5, 7), PackedInt32Array(7, 5, 8), PackedInt32Array(10, 9, 11), PackedInt32Array(11, 9, 8), PackedInt32Array(8, 5, 3), PackedInt32Array(8, 3, 11), PackedInt32Array(13, 12, 14), PackedInt32Array(14, 12, 17), PackedInt32Array(14, 17, 16), PackedInt32Array(14, 16, 15), PackedInt32Array(14, 15, 18), PackedInt32Array(18, 15, 20), PackedInt32Array(18, 20, 19), PackedInt32Array(20, 15, 21), PackedInt32Array(12, 13, 22), PackedInt32Array(24, 23, 25), PackedInt32Array(25, 23, 26), PackedInt32Array(23, 27, 26), PackedInt32Array(26, 27, 22), PackedInt32Array(22, 27, 12), PackedInt32Array(28, 24, 25), PackedInt32Array(30, 29, 31), PackedInt32Array(31, 29, 32), PackedInt32Array(28, 25, 33), PackedInt32Array(33, 25, 34), PackedInt32Array(32, 33, 35), PackedInt32Array(35, 33, 36), PackedInt32Array(36, 33, 37), PackedInt32Array(37, 33, 34), PackedInt32Array(38, 31, 32), PackedInt32Array(35, 38, 32), PackedInt32Array(40, 39, 41), PackedInt32Array(41, 39, 42), PackedInt32Array(43, 46, 44), PackedInt32Array(44, 46, 45), PackedInt32Array(48, 47, 49), PackedInt32Array(49, 47, 50), PackedInt32Array(53, 52, 51), PackedInt32Array(29, 30, 54), PackedInt32Array(49, 50, 55), PackedInt32Array(55, 50, 58), PackedInt32Array(55, 58, 56), PackedInt32Array(56, 58, 57), PackedInt32Array(54, 59, 29), PackedInt32Array(29, 59, 60), PackedInt32Array(60, 59, 61), PackedInt32Array(62, 64, 63), PackedInt32Array(53, 51, 65), PackedInt32Array(65, 51, 66), PackedInt32Array(58, 64, 57), PackedInt32Array(57, 64, 66), PackedInt32Array(61, 59, 67), PackedInt32Array(67, 59, 65), PackedInt32Array(65, 66, 67), PackedInt32Array(67, 66, 68), PackedInt32Array(68, 66, 62), PackedInt32Array(62, 66, 64), PackedInt32Array(39, 40, 17), PackedInt32Array(17, 40, 67), PackedInt32Array(17, 67, 68), PackedInt32Array(17, 68, 16), PackedInt32Array(71, 70, 69), PackedInt32Array(69, 73, 72), PackedInt32Array(74, 76, 75), PackedInt32Array(71, 69, 74), PackedInt32Array(74, 69, 76), PackedInt32Array(76, 69, 77), PackedInt32Array(77, 69, 72), PackedInt32Array(78, 80, 79), PackedInt32Array(82, 81, 83), PackedInt32Array(83, 81, 80), PackedInt32Array(83, 80, 84), PackedInt32Array(84, 80, 78), PackedInt32Array(78, 85, 84), PackedInt32Array(86, 89, 87), PackedInt32Array(87, 89, 88), PackedInt32Array(92, 91, 93), PackedInt32Array(93, 91, 94), PackedInt32Array(94, 91, 90), PackedInt32Array(94, 90, 37), PackedInt32Array(89, 92, 88), PackedInt32Array(88, 92, 93), PackedInt32Array(94, 95, 93), PackedInt32Array(52, 53, 96), PackedInt32Array(52, 96, 91), PackedInt32Array(91, 96, 90), PackedInt32Array(90, 36, 37), PackedInt32Array(98, 97, 99), PackedInt32Array(99, 97, 100), PackedInt32Array(104, 103, 101), PackedInt32Array(101, 103, 102), PackedInt32Array(107, 106, 105), PackedInt32Array(107, 105, 21), PackedInt32Array(21, 105, 108), PackedInt32Array(21, 108, 20), PackedInt32Array(109, 105, 106), PackedInt32Array(109, 106, 110), PackedInt32Array(110, 106, 112), PackedInt32Array(110, 112, 111), PackedInt32Array(111, 112, 63), PackedInt32Array(112, 62, 63), PackedInt32Array(111, 113, 110), PackedInt32Array(117, 116, 114), PackedInt32Array(114, 116, 115), PackedInt32Array(119, 118, 120), PackedInt32Array(120, 118, 121), PackedInt32Array(114, 122, 117), PackedInt32Array(117, 122, 123), PackedInt32Array(126, 125, 124), PackedInt32Array(124, 125, 121), PackedInt32Array(121, 125, 120), PackedInt32Array(123, 122, 127), PackedInt32Array(128, 123, 127), PackedInt32Array(127, 126, 128), PackedInt32Array(128, 126, 124), PackedInt32Array(115, 116, 119), PackedInt32Array(119, 116, 118), PackedInt32Array(131, 130, 129), PackedInt32Array(133, 132, 134), PackedInt32Array(134, 132, 135), PackedInt32Array(113, 111, 136), PackedInt32Array(113, 136, 137), PackedInt32Array(137, 138, 113), PackedInt32Array(113, 138, 139), PackedInt32Array(139, 138, 135), PackedInt32Array(134, 135, 138), PackedInt32Array(87, 140, 86), PackedInt32Array(86, 140, 141), PackedInt32Array(144, 143, 142), PackedInt32Array(55, 56, 145), PackedInt32Array(145, 56, 141), PackedInt32Array(145, 141, 140), PackedInt32Array(145, 140, 146), PackedInt32Array(146, 144, 145), PackedInt32Array(145, 144, 147), PackedInt32Array(147, 144, 142), PackedInt32Array(151, 150, 148), PackedInt32Array(148, 150, 149), PackedInt32Array(149, 150, 152), PackedInt32Array(152, 150, 153), PackedInt32Array(155, 151, 154), PackedInt32Array(154, 151, 148), PackedInt32Array(158, 157, 156), PackedInt32Array(156, 157, 153), PackedInt32Array(160, 155, 159), PackedInt32Array(159, 155, 154), PackedInt32Array(153, 157, 152), PackedInt32Array(159, 161, 160), PackedInt32Array(160, 161, 162), PackedInt32Array(156, 162, 158), PackedInt32Array(162, 161, 158), PackedInt32Array(165, 164, 163), PackedInt32Array(164, 165, 167), PackedInt32Array(167, 165, 166), PackedInt32Array(167, 166, 168), PackedInt32Array(173, 172, 169), PackedInt32Array(169, 172, 171), PackedInt32Array(169, 171, 170), PackedInt32Array(176, 175, 174), PackedInt32Array(167, 168, 177), PackedInt32Array(177, 168, 170), PackedInt32Array(172, 173, 174), PackedInt32Array(174, 173, 176), PackedInt32Array(171, 177, 170), PackedInt32Array(175, 176, 163), PackedInt32Array(163, 176, 178), PackedInt32Array(163, 178, 165), PackedInt32Array(181, 180, 179), PackedInt32Array(184, 183, 182), PackedInt32Array(182, 183, 179), PackedInt32Array(179, 183, 181), PackedInt32Array(186, 180, 185), PackedInt32Array(185, 180, 181), PackedInt32Array(190, 189, 187), PackedInt32Array(187, 189, 188), PackedInt32Array(182, 191, 184), PackedInt32Array(184, 191, 192), PackedInt32Array(189, 186, 188), PackedInt32Array(188, 186, 185), PackedInt32Array(191, 193, 192), PackedInt32Array(192, 193, 194), PackedInt32Array(193, 190, 194), PackedInt32Array(194, 190, 187), PackedInt32Array(195, 95, 94), PackedInt32Array(142, 143, 195), PackedInt32Array(142, 195, 196), PackedInt32Array(196, 195, 94), PackedInt32Array(133, 197, 132), PackedInt32Array(132, 197, 198), PackedInt32Array(47, 48, 197), PackedInt32Array(197, 48, 198)]
geometry_parsed_geometry_type = 2
cell_height = 0.15

[sub_resource type="PlaneMesh" id="PlaneMesh_x0yk8"]

[node name="MainScene" type="Node3D"]

[node name="SceneElements" type="Node3D" parent="."]

[node name="Camera3D" type="Camera3D" parent="SceneElements"]
transform = Transform3D(-4.37114e-08, 1, 4.37114e-08, 0, -4.37114e-08, 1, 1, 4.37114e-08, 1.91069e-15, 0, 30, 0)

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="SceneElements"]
transform = Transform3D(-0.356906, -0.923157, 0.142826, -0.445914, 0.302718, 0.842332, -0.820841, 0.236945, -0.51969, 2.42625, 40.6795, -67.4475)
shadow_enabled = true
directional_shadow_mode = 0

[node name="WorldEnvironment" type="WorldEnvironment" parent="SceneElements"]
environment = SubResource("Environment_6gm1o")

[node name="NavMeshAgentSpawner" parent="." node_paths=PackedStringArray("regular_agents_container", "patrolling_agents_container") instance=ExtResource("1_oif8a")]
regular_agents_container = NodePath("../RegularAgents")
patrolling_agents_container = NodePath("../PatrollingAgents")

[node name="RegularAgents" type="Node3D" parent="."]

[node name="PatrollingAgents" type="Node3D" parent="."]

[node name="NavigationRegion3D" type="NavigationRegion3D" parent="."]
navigation_mesh = SubResource("NavigationMesh_x0ea8")

[node name="Ground" type="CSGMesh3D" parent="NavigationRegion3D"]
transform = Transform3D(25, 0, 0, 0, 1, 0, 0, 0, 25, 0, 0, 0)
use_collision = true
mesh = SubResource("PlaneMesh_x0yk8")

[node name="Obstacles" type="Node3D" parent="NavigationRegion3D"]

[node name="VendingMachine" type="CSGPolygon3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(-0.999946, 0, -0.0104369, 0, 1, 0, 0.0104369, 0, -0.999946, -8.92754, -0.171761, -2.52809)
use_collision = true
polygon = PackedVector2Array(0, 0, -2.65147, 4.49786, 2.20239, 4.3185, 2.65078, -0.0192878)
depth = 4.22

[node name="Ramp" type="CSGPolygon3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(0.685327, 0.0017245, 0.728234, -0.00273065, 0.999996, 0.000201709, -0.728231, -0.00212681, 0.685329, 10.8265, 0.418821, -16.606)
use_collision = true
polygon = PackedVector2Array(-12.8262, -0.373938, 2.51742, 3.16856, 2.72739, -0.528321)
depth = 4.22

[node name="DONUT" type="CSGTorus3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 16, 1, 14.1927)
use_collision = true
inner_radius = 0.552846
outer_radius = 3.1275

[node name="DONUT2" type="CSGTorus3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.2204, 1, 6.48822)
use_collision = true
inner_radius = 0.552846
outer_radius = 3.1275

[node name="DONUT3" type="CSGTorus3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -1.68316, 1, 16.205)
use_collision = true
inner_radius = 0.552846
outer_radius = 4.87135

[node name="Water Tower" type="CSGCylinder3D" parent="NavigationRegion3D/Obstacles"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12, 5.77205, -7.04661)
use_collision = true
radius = 3.41353
height = 11.4981

[node name="Walls" type="Node3D" parent="NavigationRegion3D/Obstacles"]

[node name="SeparatorWall1" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -18.9391, 3.27165, 7.25911)
size = Vector3(10.315, 6.66495, 1)

[node name="SeparatorWall2" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -1.61143, 3.27165, -19.2857)
size = Vector3(10.315, 6.66495, 1)

[node name="SeparatorWall3" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 6.43524, 3.27165, 18.8833)
size = Vector3(10.315, 6.66495, 1)

[node name="ZPositiveWall" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0601082, 3.27165, 24.5371)
use_collision = true
size = Vector3(50.0539, 6.66495, 1)

[node name="ZNegativeWall" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.0601082, 3.27165, -24.9052)
use_collision = true
size = Vector3(50.0539, 6.66495, 1)

[node name="XPositiveWall" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 24.5706, 3.27165, 0.0549259)
use_collision = true
size = Vector3(50.0539, 6.66495, 1)

[node name="XNegativeWall" type="CSGBox3D" parent="NavigationRegion3D/Obstacles/Walls"]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -24.6002, 3.27165, 0.0549281)
use_collision = true
size = Vector3(50.0539, 6.66495, 1)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="NavMeshAgentPicker" parent="CanvasLayer" instance=ExtResource("2_oyxkh")]
mouse_filter = 1

[node name="Controls" parent="CanvasLayer" instance=ExtResource("3_mjhsp")]
